<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜çŸ¥ã‚¯ã‚¨ã‚¹ãƒˆ - åœŸä½ã®ç§˜å®ã‚’æ¢ã›</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        /* CSSã‚’ã“ã“ã«é›†ç´„ */
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; }

        #map { height: 100vh; width: 100%; z-index: 1; }

        /* ç”»é¢ä¸Šã®UI */
        #ui-layer {
            position: absolute; top: 10px; left: 10px; z-index: 100;
            background: rgba(0, 0, 0, 0.8); color: gold;
            padding: 10px 20px; border: 3px solid #8b4513; border-radius: 10px;
            pointer-events: none; /* ä¸‹ã®åœ°å›³æ“ä½œã‚’é‚ªé­”ã—ãªã„ */
        }

        /* ã‚¯ã‚¤ã‚ºã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«ï¼‰ */
        #quiz-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 1000;
            display: flex; justify-content: center; align-items: center;
        }

        .quiz-content {
            background: #f4e4bc; color: #333; padding: 25px;
            border: 5px solid #5d4037; width: 85%; max-width: 400px;
            text-align: center; border-radius: 15px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        .option-btn {
            display: block; width: 100%; margin: 10px 0; padding: 12px;
            background: #8d6e63; color: white; border: none; 
            cursor: pointer; border-radius: 5px; font-weight: bold;
        }

        .option-btn:hover { background: #6d4c41; }

        .close-btn {
            margin-top: 15px; background: transparent; border: 1px solid #5d4037;
            color: #5d4037; cursor: pointer; padding: 5px 10px;
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="ui-layer">
        <h2 style="margin:0; font-size: 1.2rem;">ğŸ—¡ï¸ é«˜çŸ¥ã‚¯ã‚¨ã‚¹ãƒˆ</h2>
        <p id="score" style="margin:5px 0 0 0;">ç²å¾—ã—ãŸç§˜å®: 0</p>
    </div>

    <div id="map"></div>

    <div id="quiz-modal" class="hidden">
        <div class="quiz-content">
            <h2 id="quiz-spot-name" style="color: #5d4037;">???</h2>
            <p id="quiz-question" style="font-size: 1.1rem; line-height: 1.5;">å•é¡ŒãŒè¡¨ç¤ºã•ã‚Œã¾ã™</p>
            <div id="quiz-options"></div>
            <button class="close-btn" onclick="closeQuiz()">é€ƒã’ã‚‹</button>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // JSã‚’ã“ã“ã«é›†ç´„
        
        // 1. åœ°å›³ã®åˆæœŸåŒ–
        const map = L.map('map').setView([33.5670, 133.5430], 14);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap'
        }).addTo(map);

        let score = 0;

        // 2. 20ç®‡æ‰€ã®ãƒ‡ãƒ¼ã‚¿ï¼ˆåº§æ¨™ã‚’å³ã‚¯ãƒªãƒƒã‚¯ã§èª¿ã¹ã¦è¿½åŠ ã—ã¦ã„ã‘ã¾ã™ï¼ï¼‰
        const questSpots = [
            { name: "é«˜çŸ¥åŸ", pos: [33.5607, 133.5314], q: "é«˜çŸ¥åŸã®å¤©å®ˆã¯æ—¥æœ¬ã«12ã—ã‹ãªã„ã€Œç¾å­˜å¤©å®ˆã€ã®ã²ã¨ã¤ï¼Ÿ", ops: ["ã¯ã„", "ã„ã„ãˆ"], ans: "ã¯ã„" },
            { name: "ã¯ã‚Šã¾ã‚„æ©‹", pos: [33.5594, 133.5428], q: "ã¯ã‚Šã¾ã‚„æ©‹ã®æœ‰åãªä¼èª¬ã«ç™»å ´ã™ã‚‹åƒ§ã®åå‰ã¯ï¼Ÿ", ops: ["ç´”ä¿¡", "è‰¯å¯›", "ä¸€ä¼‘"], ans: "ç´”ä¿¡" },
            { name: "æ¡‚æµœ", pos: [33.4971, 133.5744], q: "æ¡‚æµœã«ç«‹ã¤å‚æœ¬é¾é¦¬åƒã€‚é¾é¦¬ãŒå‘ã„ã¦ã„ã‚‹æ–¹å‘ã¯ã©ã“ï¼Ÿ", ops: ["å¤ªå¹³æ´‹", "é«˜çŸ¥åŸ", "å¯Œå£«å±±"], ans: "å¤ªå¹³æ´‹" },
            { name: "é«˜çŸ¥é§…", pos: [33.5672, 133.5435], q: "é§…å‰ã«ã‚ã‚‹ã€Œä¸‰å¿—å£«åƒã€ã€‚æ­¦å¸‚åŠå¹³å¤ªã€å‚æœ¬é¾é¦¬ã¨ã‚‚ã†ä¸€äººã¯ï¼Ÿ", ops: ["ä¸­å²¡æ…å¤ªéƒ", "å²©å´å¼¥å¤ªéƒ", "æ¿å£é€€åŠ©"], ans: "ä¸­å²¡æ…å¤ªéƒ" },
            { name: "ç‰§é‡æ¤ç‰©åœ’", pos: [33.5463, 133.5775], q: "ç‰§é‡å¯Œå¤ªéƒåšå£«ãŒå‘½åã—ãŸã€ã“ã®åœ°ã‚’ä»£è¡¨ã™ã‚‹æ¤ç‰©ã¯ï¼Ÿ", ops: ["ãƒã‚¤ã‚«ã‚ªã‚¦ãƒ¬ãƒ³", "ãƒãƒ¥ãƒ¼ãƒªãƒƒãƒ—", "ãƒ©ãƒ•ãƒ¬ã‚·ã‚¢"], ans: "ãƒã‚¤ã‚«ã‚ªã‚¦ãƒ¬ãƒ³" },
            { name: "ã²ã‚ã‚å¸‚å ´", pos: [33.5606, 133.5361], q: "ã²ã‚ã‚å¸‚å ´ã§ä¸€ç•ªäººæ°—ã®ã‚°ãƒ«ãƒ¡ã¨ã„ãˆã°ï¼Ÿ", ops: ["ã‚«ãƒ„ã‚ªã®ã‚¿ã‚¿ã‚­", "ã†ã©ã‚“", "ãŠå¥½ã¿ç„¼ã"], ans: "ã‚«ãƒ„ã‚ªã®ã‚¿ã‚¿ã‚­" },
            { name: "é«˜çŸ¥ã‚ˆã•ã“ã„æƒ…å ±äº¤æµé¤¨", pos: [33.5590, 133.5450], q: "ã‚ˆã•ã“ã„ç¥­ã‚Šã§é³´ã‚‰ã—ã¦è¸Šã‚‹é“å…·ã®åå‰ã¯ï¼Ÿ", ops: ["é³´å­ï¼ˆãªã‚‹ã“ï¼‰", "ãƒãƒ", "æ‰‡å­"], ans: "é³´å­ï¼ˆãªã‚‹ã“ï¼‰" }
            // ã“ã“ã«ã‚ã¨13å€‹è¿½åŠ ã—ã¦20å€‹ã«ã—ã¦ã¿ã¦ãã ã•ã„ï¼
        ];

        // 3. ãƒãƒ¼ã‚«ãƒ¼ã‚’ä¸€æ°—ã«è¨­ç½®
        questSpots.forEach((spot, index) => {
            const marker = L.marker(spot.pos).addTo(map);
            
            // ãƒãƒ¼ã‚«ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‚‰ã‚¯ã‚¤ã‚ºé–‹å§‹
            marker.on('click', () => {
                openQuiz(index);
            });
        });

        // 4. ã‚¯ã‚¤ã‚ºè¡¨ç¤º
        function openQuiz(index) {
            const spot = questSpots[index];
            document.getElementById('quiz-spot-name').innerText = `ã€ ${spot.name} ã®è©¦ç·´ ã€‘`;
            document.getElementById('quiz-question').innerText = spot.q;
            
            const optionsDiv = document.getElementById('quiz-options');
            optionsDiv.innerHTML = ""; 
            
            spot.ops.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = "option-btn";
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(opt, spot.ans);
                optionsDiv.appendChild(btn);
            });
            
            document.getElementById('quiz-modal').classList.remove('hidden');
        }

        // 5. æ­£è§£åˆ¤å®š
        function checkAnswer(userAns, correctAns) {
            if (userAns === correctAns) {
                alert("âœ¨ æ­£è§£ï¼ç§˜å®ã‚’æ‰‹ã«å…¥ã‚ŒãŸï¼");
                score++;
                document.getElementById('score').innerText = `ç²å¾—ã—ãŸç§˜å®: ${score}`;
            } else {
                alert("ğŸ’€ æ®‹å¿µï¼ä¿®è¡Œã—ç›´ã—ãœã‚ˆã€‚");
            }
            closeQuiz();
        }

        function closeQuiz() {
            document.getElementById('quiz-modal').classList.add('hidden');
        }
    </script>
</body>
</html>
