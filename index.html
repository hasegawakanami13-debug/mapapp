<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é«˜çŸ¥ã‚¯ã‚¨ã‚¹ãƒˆ - å¹•æœ«ãƒ»æ­´å²æ¢ç´¢ç·¨</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #aad3df; }
        #map { height: 100vh; width: 100%; z-index: 1; }

        /* UIãƒ¬ã‚¤ãƒ¤ãƒ¼ */
        #ui-layer {
            position: absolute; top: 15px; left: 15px; z-index: 100;
            background: rgba(0, 0, 0, 0.85); color: #ffd700;
            padding: 15px; border: 2px solid #ffd700; border-radius: 8px;
            font-family: 'Hiragino Kaku Gothic ProN', sans-serif;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }

        /* ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ï¼ˆãƒ›ãƒãƒ¼æ™‚ã®ãƒ‡ã‚¶ã‚¤ãƒ³ï¼‰ */
        .custom-tooltip {
            background: rgba(0, 0, 0, 0.9) !important;
            color: #ffd700 !important;
            border: 1px solid #ffd700 !important;
            font-weight: bold;
            font-size: 13px;
            padding: 5px 10px;
            border-radius: 4px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }

        /* ã‚¯ã‚¤ã‚ºç”»é¢ */
        #quiz-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 1000;
            display: flex; justify-content: center; align-items: center;
        }
        .quiz-content {
            background: #fffbe6; color: #333; padding: 30px;
            border: 6px double #8b4513; width: 85%; max-width: 400px;
            text-align: center; border-radius: 10px;
        }
        .option-btn {
            display: block; width: 100%; margin: 12px 0; padding: 15px;
            background: #2a5d9a; color: white; border: none; 
            cursor: pointer; border-radius: 8px; font-size: 1rem; font-weight: bold;
        }

        .hidden { display: none !important; }
        .leaflet-marker-icon { cursor: pointer; }
    </style>
</head>
<body>

    <div id="ui-layer">
        <h2 style="margin:0;">ğŸ—¡ï¸ é«˜çŸ¥ã‚¯ã‚¨ã‚¹ãƒˆ</h2>
        <p id="score" style="margin:5px 0 0 0; font-weight: bold;">ç²å¾—ã—ãŸç§˜å®: 0 / 35</p>
    </div>

    <div id="map"></div>

    <div id="quiz-modal" class="hidden">
        <div class="quiz-content">
            <h2 id="quiz-spot-name" style="color: #2a5d9a; margin-top: 0;"></h2>
            <p id="quiz-question" style="font-weight: bold; margin-bottom: 20px;"></p>
            <div id="quiz-options"></div>
            <button onclick="closeQuiz()" style="margin-top:20px; background:none; border:none; color:gray; text-decoration:underline;">é€ƒã’ã‚‹</button>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const kochiBounds = [[32.3, 132.0], [34.2, 134.8]];

        const map = L.map('map', {
            tap: true,
            zoomControl: false,
            maxBounds: kochiBounds,
            maxBoundsViscosity: 1.0,
            minZoom: 9,
            maxZoom: 15
        }).setView([33.35, 133.4], 9);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap',
            bounds: kochiBounds
        }).addTo(map);

        let score = 0;

        // ã‚¹ãƒãƒƒãƒˆãƒ‡ãƒ¼ã‚¿
        const questSpots = [
     { name: "é«˜çŸ¥å¸‚ãƒ»éµœæ¥å·£", level: "â˜…3", pos: [33.5420, 133.5120], q: "ã€é›£èª­åœ°åã€‘ã€Œéµœæ¥å·£ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ", ops: ["ã†ãã‚‹ã™", "ã†ãã™", "ã†ã“ã™"], ans: "ã†ãã‚‹ã™" },
     { name: "é«˜çŸ¥å¸‚ãƒ»é«˜åŸ‡", level: "â˜…3", pos: [33.5710, 133.5580], q: "ã€é›£èª­åœ°åã€‘ã€Œé«˜åŸ‡ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ", ops: ["ãŸã‹ãã­", "ãŸã‹ãŠã‘", "ãŸã‹ã¯ãŸ"], ans: "ãŸã‹ãã­" },
     { name: "é«˜çŸ¥å¸‚ãƒ»å°¾ç«‹", level: "â˜…2", pos: [33.5950, 133.5300], q: "ã€é›£èª­åœ°åã€‘ã€Œå°¾ç«‹ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ", ops: ["ã²ã˜ã‚Š", "ãŠã ã¡", "ãŠãŸã¦"], ans: "ã²ã˜ã‚Š" },
     { name: "é«˜çŸ¥å¸‚ãƒ»åˆæœˆ", level: "â˜…3", pos: [33.5850, 133.5200], q: "ã€é›£èª­åœ°åã€‘ã€Œåˆæœˆã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ", ops: ["ã¿ã‹ã¥ã", "ã¯ã¥ã", "ã†ã„ã¥ã"], ans: "ã¿ã‹ã¥ã" },

            // --- çœŒæ±éƒ¨ãƒ»ä¸­éƒ¨ ---
     { name: "å®‰èŠ¸å¸‚ãƒ»åˆ¥å½¹", level: "â˜…2", pos: [33.5500, 133.9500], q: "ã€é›£èª­åœ°åã€‘ã€Œåˆ¥å½¹ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ", ops: ["ã¹ã£ã¡ã‚ƒã", "ã¹ã¤ã‚„ã", "ã‚ã‹ã‚Œã‚„ã"], ans: "ã¹ã£ã¡ã‚ƒã" },
     { name: "å—å›½å¸‚ãƒ»å²¡è±Šç”º", level: "â˜…2", pos: [33.5930, 133.6062], q: "ã€é›£èª­åœ°åã€‘ã€Œå²¡è±Šã€ã®èª­ã¿æ–¹ã¯ï¼Ÿï¼ˆé•·å®—æˆ‘éƒ¨æ°ã®æœ¬æ‹ åœ°ï¼‰", ops: ["ãŠã“ã†", "ãŠã‹ã‚†ãŸã‹", "ãŠã‹ã¨ã‚ˆ"], ans: "ãŠã“ã†" },
    { name: "é¦™ç¾å¸‚ãƒ»äº”ç™¾è”µ", level: "â˜…3", pos: [33.6700, 133.7800], q: "ã€é›£èª­åœ°åã€‘ã€Œäº”ç™¾è”µã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ", ops: ["ã„ãŠã‚ã„", "ã„ãŠãã‚‰", "ã”ã²ã‚ƒããã‚‰"], ans: "ã„ãŠã‚ã„" },
     { name: "ç”°é‡ç”ºãƒ»æ·Œæ¿¤", level: "â˜…3", pos: [33.4300, 134.0100], q: "ã€é›£èª­åœ°åã€‘ã€Œæ·Œæ¿¤ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ", ops: ["ã—ã‚‡ã†ã¨ã†", "ãªãŠ", "ãªã¿"], ans: "ã—ã‚‡ã†ã¨ã†" },
    { name: "é¦¬è·¯æ‘ãƒ»é­šæ¢ç€¬", level: "â˜…3", pos: [33.6300, 134.1100], q: "ã€é›£èª­åœ°åã€‘ã€Œé­šæ¢ç€¬ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ", ops: ["ã‚„ãªã›", "ãã‚‡ã‚Šã‚‡ã†ãœ", "ã†ãŠã‚„ãªã›"], ans: "ã‚„ãªã›" },

            // --- çœŒè¥¿éƒ¨ ---
     { name: "å®¿æ¯›å¸‚ãƒ»å®¿æ¯›", level: "â˜…1", pos: [32.9400, 132.7200], q: "ã€é›£èª­åœ°åã€‘ã€Œå®¿æ¯›ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ", ops: ["ã™ãã‚‚", "ã—ã‚…ãã‚‚ã†", "ã‚„ã©ã’"], ans: "ã™ãã‚‚" },
     { name: "åœŸä½æ¸…æ°´å¸‚ãƒ»éµæ›", level: "â˜…2", pos: [32.7800, 132.9500], q: "ã€é›£èª­åœ°åã€‘ã€Œéµæ›ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ", ops: ["ã‹ã„ã‹ã‘", "ã‹ãã‹ã‘", "ã‘ã‚“ãŒã„"], ans: "ã‹ã„ã‹ã‘" },
     { name: "å››ä¸‡åå¸‚ãƒ»ç§‹ç”°", level: "â˜…3", pos: [32.9500, 132.9300], q: "ã€é›£èª­åœ°åã€‘ã€Œç§‹ç”°ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ", ops: ["ã‚ã„ã ", "ã‚ããŸ", "ã—ã‚…ã†ã§ã‚“"], ans: "ã‚ã„ã " },
            
            // --- å¶ºåŒ—ãƒ»ä»æ·€å·æµåŸŸ ---
     { name: "å¤§è±Šç”ºãƒ»ç²Ÿç”Ÿ", level: "â˜…3", pos: [33.7800, 133.6800], q: "ã€é›£èª­åœ°åã€‘ã€Œç²Ÿç”Ÿã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ", ops: ["ã‚ãŠã†", "ã‚ã‚ãŠ", "ã‚ã‚ãªã¾"], ans: "ã‚ãŠã†" },
     { name: "åœŸä½ç”ºãƒ»æºœäº•", level: "â˜…3", pos: [33.7500, 133.5500], q: "ã€é›£èª­åœ°åã€‘ã€Œæºœäº•ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ", ops: ["ã‚†ã‚‹ã„", "ãŸã‚ã„", "ã‚Šã‚…ã†ã›ã„"], ans: "ã‚†ã‚‹ã„" },
    { name: "ã„ã®ç”ºãƒ»äº•æµ", level: "â˜…3", pos: [33.5500, 133.4000], q: "ã€é›£èª­åœ°åã€‘ã€Œäº•æµã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ", ops: ["ã‚†ã‚‹", "ã„ã‚Šã‚…ã†", "ã„ãªãŒã‚Œ"], ans: "ã‚†ã‚‹" },
         
            // --- æ¢¼åŸãƒ»å››ä¸‡åç”ºã‚¨ãƒªã‚¢ ---
     { name: "æ¢¼åŸç”ºãƒ»ä¸Šæˆ", level: "â˜…3", pos: [33.4600, 132.9000], q: "ã€é›£èª­åœ°åã€‘ã€Œä¸Šæˆã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ", ops: ["ã†ã‚ãªã‚", "ã†ãˆãªã‚Š", "ã‹ã¿ã—ã’"], ans: "ã†ã‚ãªã‚" },
     { name: "å››ä¸‡åç”ºãƒ»å¤©ãƒå·", level: "â˜…1", pos: [33.2200, 133.0500], q: "ã€é›£èª­åœ°åã€‘ã€Œå¤©ãƒå·ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ", ops: ["ã‚ã¾ã®ãŒã‚", "ã¦ã‚“ã®ã‹ã‚", "ã‚ã„ãŒã‚"], ans: "ã‚ã¾ã®ãŒã‚" },
     { name: "æ—¥é«˜æ‘ãƒ»èµ¤æ±¢", level: "â˜…3", pos: [33.5400, 133.3500], q: "ã€é›£èª­åœ°åã€‘ã€Œèµ¤æ±¢ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ", ops: ["ã‚ã‹ã¬ãŸ", "ã‚ã‹ã—ãŠ", "ã‚ã‹ã©ã‚"], ans: "ã‚ã‹ã¬ãŸ" },

            // --- é»’æ½®ç”ºã‚¨ãƒªã‚¢ ---
     { name: "é»’æ½®ç”ºãƒ»æµ®é­", level: "â˜…2", pos: [33.0300, 133.0100], q: "ã€é›£èª­åœ°åã€‘ã€Œæµ®é­ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ", ops: ["ã†ãã¶ã¡", "ã†ãã‚€ã¡", "ãµã¹ã‚“"], ans: "ã†ãã¶ã¡" },
            
ã€€ã€€ { name: "å‚æœ¬é¾é¦¬èª•ç”Ÿåœ°", level: "â˜…1", pos: [33.5614, 133.5285], q: "å‚æœ¬é¾é¦¬ãŒç”Ÿã¾ã‚ŒãŸä¸Šç”ºã®ã“ã®å ´æ‰€ã€ç¾åœ¨ã¯ä½•ãŒç«‹ã£ã¦ã„ã‚‹ï¼Ÿ", ops: ["è¨˜å¿µç¢‘", "éŠ…åƒ", "å®Ÿç‰©å¤§ã®å®¶"], ans: "è¨˜å¿µç¢‘" },
    { name: "ä¸­å²¡æ…å¤ªéƒåƒï¼ˆå®¤æˆ¸ï¼‰", level: "â˜…2", pos: [33.2482, 134.1755], q: "é¾é¦¬ã¨å…±ã«è¿‘æ±Ÿå±‹ã§å€’ã‚ŒãŸä¸­å²¡æ…å¤ªéƒã€‚å½¼ã®å‡ºèº«åœ°ã¯ã©ã“ã®æ‘ï¼Ÿ", ops: ["åŒ—å·æ‘", "é¦¬è·¯æ‘", "èŠ¸è¥¿æ‘"], ans: "åŒ—å·æ‘" },
    { name: "æ­¦å¸‚åŠå¹³å¤ªæ—§å®…", level: "â˜…3", pos: [33.5786, 133.5855], q: "åœŸä½å‹¤ç‹å…šã‚’çµ„ç¹”ã—ãŸæ­¦å¸‚åŠå¹³å¤ªã®å·ï¼ˆãƒšãƒ³ãƒãƒ¼ãƒ ï¼‰ã¯ï¼Ÿ", ops: ["ç‘å±±", "å—å†¥", "é›…æ¥½"], ans: "ç‘å±±" },
    { name: "å²©å´å¼¥å¤ªéƒç”Ÿå®¶", level: "â˜…2", pos: [33.5215, 133.9212], q: "ä¸‰è±è²¡é–¥ã®å‰µå§‹è€…ã€å²©å´å¼¥å¤ªéƒã€‚å½¼ã®å®¶ç´‹ãŒä»Šã®ä¸‰è±ãƒãƒ¼ã‚¯ã®ç”±æ¥ã«ãªã£ãŸï¼Ÿ", ops: ["æœ¬å½“", "å˜˜"], ans: "æœ¬å½“" },
    { name: "ã‚¸ãƒ§ãƒ³ä¸‡æ¬¡éƒéŠ…åƒ", level: "â˜…2", pos: [32.7245, 133.0195], q: "é­é›£å¾Œã€ã‚¢ãƒ¡ãƒªã‚«ã®èˆ¹ã«æ•‘ã‚ã‚ŒãŸä¸‡æ¬¡éƒãŒå¸°å›½å¾Œã«ä¼ãˆãŸã‚¹ãƒãƒ¼ãƒ„ã¯ï¼Ÿ", ops: ["é‡çƒ", "ãƒ†ãƒ‹ã‚¹", "ã‚µãƒƒã‚«ãƒ¼"], ans: "é‡çƒ" },
    { name: "è¿‘è—¤é•·æ¬¡éƒã®ç¢‘", level: "â˜…3", pos: [33.5650, 133.5350], q: "é¾é¦¬ã®å³è…•ã¨ã—ã¦æ´»èºã—ãŸé•·æ¬¡éƒã€‚é¥…é ­å±‹ã®æ¯å­ã ã£ãŸã“ã¨ã‹ã‚‰ä½•ã¨å‘¼ã°ã‚ŒãŸï¼Ÿ", ops: ["é¥…é ­å±‹é•·æ¬¡éƒ", "ãŠè“å­é•·æ¬¡éƒ", "ç ‚ç³–å±‹é•·æ¬¡éƒ"], ans: "é¥…é ­å±‹é•·æ¬¡éƒ" },

    // --- æˆ¦å›½ãƒ»ä¸­ä¸–ï¼ˆé•·å®—æˆ‘éƒ¨æ°ãªã©ï¼‰ ---
    { name: "å²¡è±Šå±±ï¼ˆé•·å®—æˆ‘éƒ¨å…ƒè¦ªï¼‰", level: "â˜…3", pos: [33.5930, 133.6062], q: "åœŸä½ã‚’çµ±ä¸€ã—ãŸé•·å®—æˆ‘éƒ¨å…ƒè¦ªã®å±…åŸãŒã‚ã£ãŸå ´æ‰€ã¯ï¼Ÿ", ops: ["å²¡è±ŠåŸ", "æµ¦æˆ¸åŸ", "æœå€‰åŸ"], ans: "å²¡è±ŠåŸ" },
    { name: "è‹¥å®®å…«å¹¡å®®", level: "â˜…3", pos: [33.5042, 133.5511], q: "é•·å®—æˆ‘éƒ¨å…ƒè¦ªãŒåˆé™£ã®éš›ã«å¿…å‹ç¥ˆé¡˜ã‚’ã—ãŸç¥ç¤¾ã¯ï¼Ÿ", ops: ["è‹¥å®®å…«å¹¡å®®", "æ½®æ±Ÿå¤©æº€å®®", "åœŸä½ç¥ç¤¾"], ans: "è‹¥å®®å…«å¹¡å®®" },
    { name: "é›ªè¹Šå¯º", level: "â˜…3", pos: [33.5028, 133.5505], q: "é•·å®—æˆ‘éƒ¨æ°ã®è©æå¯ºã€‚å…ƒè¦ªã®å¹¼åã«ã¡ãªã‚“ã§åä»˜ã‘ã‚‰ã‚ŒãŸï¼Ÿ", ops: ["æœ¬å½“", "å˜˜"], ans: "æœ¬å½“" },

    // --- è‡ªç”±æ°‘æ¨©ãƒ»æ”¿æ²» ---
    { name: "æ¿å£é€€åŠ©åƒ", level: "â˜…1", pos: [33.5601, 133.5312], q: "ã€Œæ¿å£æ­»ã™ã¨ã‚‚è‡ªç”±ã¯æ­»ã›ãšã€ã§æœ‰åãªæ¿å£é€€åŠ©ãŒä½œã£ãŸæ”¿å…šã¯ï¼Ÿ", ops: ["è‡ªç”±å…š", "é€²æ­©å…š", "å…±ç”£å…š"], ans: "è‡ªç”±å…š" },
    { name: "é«˜çŸ¥å¸‚ç«‹è‡ªç”±æ°‘æ¨©è¨˜å¿µé¤¨", level: "â˜…2", pos: [33.5550, 133.5211], q: "é«˜çŸ¥ã¯ã€Œæ°‘æ¨©é‹å‹•ã®ã‚†ã‹ã‚Šã®åœ°ã€ã¨ã—ã¦ä½•ã¨å‘¼ã°ã‚Œã¦ã„ã‚‹ï¼Ÿ", ops: ["è‡ªç”±ã¯åœŸä½ã®å±±é–“ã‚ˆã‚Š", "å¹³å’Œã®ç ¦", "ç¶­æ–°ã®é‡Œ"], ans: "è‡ªç”±ã¯åœŸä½ã®å±±é–“ã‚ˆã‚Š" },

    // --- æ–‡åŒ–ãƒ»å»ºé€ ç‰© ---
    { name: "æ’­ç£¨å±‹å®—å¾³ã®å¢“", level: "â˜…3", pos: [33.5600, 133.5430], q: "ã€Œã¯ã‚Šã¾ã‚„æ©‹ã€ã®åå‰ã®ç”±æ¥ã«ãªã£ãŸè±ªå•†ã®åå‰ã¯ï¼Ÿ", ops: ["æ’­ç£¨å±‹", "åœŸä½å±‹", "é«˜çŸ¥å±‹"], ans: "æ’­ç£¨å±‹" },
    { name: "æ—§å±±å†…å®¶ä¸‹å±‹æ•·", level: "â˜…2", pos: [33.5562, 133.5321], q: "å¹•æœ«ã®åœŸä½è—©ä¸»ã€å±±å†…å®¹å ‚ï¼ˆè±Šä¿¡ï¼‰ãŒè‡ªã‚‰ã‚’ç§°ã—ãŸè¨€è‘‰ã¯ï¼Ÿ", ops: ["é¯¨æµ·é…”ä¾¯", "åœŸä½ã®è™", "é…”ã„ã©ã‚Œå¤§å"], ans: "é¯¨æµ·é…”ä¾¯" },

    // --- è‡ªç„¶ãƒ»ä¼èª¬ ---
    { name: "é¾æ²³æ´ï¼ˆç¥ã®å£ºï¼‰", level: "â˜…3", pos: [33.6033, 133.7436], q: "ç´„2000å¹´å‰ã«ç½®ã‹ã‚ŒãŸåœŸå™¨ãŒé¾ä¹³çŸ³ã«å–ã‚Šè¾¼ã¾ã‚ŒãŸä¸–ç•Œå”¯ä¸€ã®éºç‰©ã¯ï¼Ÿ", ops: ["ç¥ã®å£º", "æ™‚ã®å™¨", "çŸ³ã®çš¿"], ans: "ç¥ã®å£º" },
    { name: "å®‰å±…æ¸“è°·", level: "â˜…2", pos: [33.6335, 133.1512], q: "ä»æ·€ãƒ–ãƒ«ãƒ¼ãŒæœ€ã‚‚æ¿ƒãè¦‹ãˆã‚‹ã¨è¨€ã‚ã‚Œã‚‹å ´æ‰€ã¯ï¼Ÿ", ops: ["æ°´æ™¶æ·µ", "ã«ã“æ·µ", "ä¸­æ´¥æ¸“è°·"], ans: "æ°´æ™¶æ·µ" },

    // ï¼ˆä¸»è¦åœ°ï¼‰ ---
    { name: "é«˜çŸ¥åŸ", level: "â˜…3", pos: [33.5607, 133.5314], q: "é«˜çŸ¥åŸã®å¤©å®ˆé–£ã¯ã€æ±Ÿæˆ¸æ™‚ä»£ã®ã¾ã¾æ®‹ã‚‹ã€Œç¾å­˜12å¤©å®ˆã€ã®ä¸€ã¤ï¼Ÿ", ops: ["ã¯ã„", "ã„ã„ãˆ"], ans: "ã¯ã„" },
    { name: "æ¡‚æµœ", level: "â˜…1", pos: [33.4971, 133.5744], q: "æœˆã®åæ‰€ã¨ã—ã¦æœ‰åãªæ¡‚æµœã€‚å‚æœ¬é¾é¦¬åƒãŒè¦‹ã¤ã‚ã¦ã„ã‚‹æ–¹å‘ã¯ï¼Ÿ", ops: ["å¤ªå¹³æ´‹ï¼ˆæµ·ï¼‰", "é«˜çŸ¥åŸ", "å¯Œå£«å±±"], ans: "å¤ªå¹³æ´‹ï¼ˆæµ·ï¼‰" },
    { name: "å››ä¸‡åå·ãƒ»ä½ç”°æ²ˆä¸‹æ©‹", level: "â˜…1", pos: [32.9984, 132.9333], q: "å››ä¸‡åå·ã«æ²ˆä¸‹æ©‹ãŒå¤šã„ç†ç”±ã¯ï¼Ÿ", ops: ["å¢—æ°´æ™‚ã«æ©‹ãŒå£Šã‚Œãªã„ãŸã‚", "å®‰ãä½œã‚‹ãŸã‚", "é£›ã³è¾¼ã‚€ãŸã‚"], ans: "å¢—æ°´æ™‚ã«æ©‹ãŒå£Šã‚Œãªã„ãŸã‚" },
    { name: "å®¤æˆ¸å²¬ãƒ»ç¯å°", level: "â˜…2", pos: [33.2472, 134.1751], q: "æ—¥æœ¬æœ€å¤§ç´šã®ãƒ¬ãƒ³ã‚ºã‚’æŒã¤å®¤æˆ¸å²¬ç¯å°ã€‚ãã®ãƒ¬ãƒ³ã‚ºã®ç›´å¾„ã¯ï¼Ÿ", ops: ["2.6m", "1.0m", "5.0m"], ans: "2.6m" },
    { name: "é³´ç„¡ç¥ç¤¾", level: "â˜…3", pos: [33.4358, 133.3985], q: "ã€ŒåœŸä½ã®å®®å³¶ã€ã¨å‘¼ã°ã‚Œã€å‚é“ãŒæµ·ã«å‘ã‹ã£ã¦ä¼¸ã³ã¦ã„ã‚‹ç¥ç¤¾ã¯ï¼Ÿ", ops: ["é³´ç„¡ï¼ˆãŠã¨ãªã—ï¼‰ç¥ç¤¾", "åœŸä½ç¥ç¤¾", "æœå€‰ç¥ç¤¾"], ans: "é³´ç„¡ï¼ˆãŠã¨ãªã—ï¼‰ç¥ç¤¾" },
    { name: "å¤§æ­©å±ãƒ»å°æ­©å±", level: "â˜…2", pos: [33.8955, 133.7612], q: "å‰é‡å·ã®æ¿€æµã§å‰Šã‚‰ã‚ŒãŸå²©çŸ³ãŒç¾ã—ã„æ¸“è°·ã€‚åå‰ã®ç”±æ¥ã¯ï¼Ÿ", ops: ["æ­©ãã®ãŒå±ãªã„ã‹ã‚‰", "å¤§ããªæ­©å¹…ã§æ­©ãã‹ã‚‰", "æ™¯è‰²ãŒç¾ã—ã„ã‹ã‚‰"], ans: "æ­©ãã®ãŒå±ãªã„ã‹ã‚‰" },
    { name: "å®‰èŠ¸ãƒ»ã—ã‚“ãŸã‚ã†ï¼ˆé­šæ¢ç€¬ï¼‰", level: "â˜…3", pos: [33.6210, 134.1105], q: "ã‹ã¤ã¦æœ¨æé‹æ¬ã§æ´»èºã—ãŸã€é­šæ¢ç€¬æ£®æ—é‰„é“ã®æ„›ç§°ã¯ï¼Ÿ", ops: ["ã‚Šã‚“ã¦ã¤", "ã—ã‚“ãŸã‚ã†å·", "åœŸä½å·"], ans: "ã—ã‚“ãŸã‚ã†å·" }

        ];

        questSpots.forEach((spot, index) => {
            const marker = L.marker(spot.pos).addTo(map);

            // ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®è¨­å®šï¼ˆãƒ›ãƒãƒ¼ã§è¡¨ç¤ºï¼‰
            marker.bindTooltip(`<b>${spot.name}</b><br>é›£æ˜“åº¦ï¼š${spot.level}`, {
                direction: 'top',
                offset: [0, -10],
                className: 'custom-tooltip'
            });

            // ã‚¯ãƒªãƒƒã‚¯ã§ã‚¯ã‚¤ã‚ºï¼ˆã‚¹ãƒãƒ›ã§ã¯2å›ç›®ã‚¿ãƒƒãƒ—ï¼‰
            marker.on('click', (e) => {
                L.DomEvent.stopPropagation(e);
                openQuiz(index);
            });
        });

        function openQuiz(index) {
            const spot = questSpots[index];
            document.getElementById('quiz-spot-name').innerText = spot.name;
            document.getElementById('quiz-question').innerText = spot.q;
            const optionsDiv = document.getElementById('quiz-options');
            optionsDiv.innerHTML = ""; 
            spot.ops.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = "option-btn";
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(opt, spot.ans);
                optionsDiv.appendChild(btn);
            });
            document.getElementById('quiz-modal').classList.remove('hidden');
        }

        function checkAnswer(userAns, correctAns) {
            if (userAns === correctAns) {
                alert("æ­£è§£ï¼ç§˜å®ã‚²ãƒƒãƒˆãœã‚ˆï¼");
                score++;
                document.getElementById('score').innerText = `ç²å¾—ã—ãŸç§˜å®: ${score} / ${questSpots.length}`;
            } else {
                alert("ãƒã‚ºãƒ¬ï¼å­¦ã³ç›´ã—ã¦å‡ºç›´ã—ã¡ã‚„ï¼");
            }
            closeQuiz();
        }

        function closeQuiz() {
            document.getElementById('quiz-modal').classList.add('hidden');
        }
    </script>
</body>
</html>
